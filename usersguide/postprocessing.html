

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Post-processing &#8212; DAGMC</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mcnp2cad" href="mcnp2cad.html" />
    <link rel="prev" title="DAGMC tools" href="tools.html" /> 
  </head><body> 
<div id="page-div" class="page">
<div id="header">
    <a id="uwhome" href="http://www.wisc.edu"><img src="../_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> 
    <a id="crest" href="http://www.wisc.edu"><img src="../_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="../index.html"><img src="../_static/images/logo.png" alt="" height="50x" /><span>DAGMC</span></a></h1>
    <div id="tagline"><span>Direct Accelerated Geometry Monte Carlo Toolkit</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://cnerg.github.com">CNERG</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="../search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="http://svalinn.github.io">Svalinn</a></li>
        <li class="menu-item"><a href="../index.html">DAGMC</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="tools.html" title="DAGMC tools"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="mcnp2cad.html" title="mcnp2cad"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
          <li class="menu-item"><a href="index.html" accesskey="U">User’s guide</a></li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"><ul>
<li><a class="reference internal" href="#">Post-processing</a><ul>
<li><a class="reference internal" href="#visualizing-dagmc-geometry">Visualizing DAGMC geometry</a></li>
<li><a class="reference internal" href="#visualizing-dagmc-mesh-tally-output">Visualizing DAGMC mesh tally output</a></li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <div class="section" id="post-processing">
<h1>Post-processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h1>
<p>One of the most important aspects of a completed calculation is being able to
view any mesh-based output alongside geometry so as to best determine important
features in results.</p>
<div class="section" id="visualizing-dagmc-geometry">
<h2>Visualizing DAGMC geometry<a class="headerlink" href="#visualizing-dagmc-geometry" title="Permalink to this headline">¶</a></h2>
<p>In the near future there will be support for reading native MOAB-produced .h5m
files in <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit">VisIt</a>. However for now users must follow this guide for viewing DAGMC
geometry. One must use <code class="docutils literal notranslate"><span class="pre">mbconvert</span></code> to produce files for visualization. The
following command will convert the DAGMC geometry to a .stl file.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mbconvert &lt;dagmc.h5m&gt; &lt;dagmc.stl&gt;
</pre></div>
</div>
<p>It is often the case that DAGMC models contain so many triangles that it is
prohibitively slow to plot such a model even in <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit">VisIt</a> or <a class="reference external" href="http://www.paraview.org">Paraview</a>. In such
cases it has proven useful to extract the faceted curves from the file and plot
those. This can be achieved with the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mbconvert -1 dagmc.h5m curves.h5m
$ mbconvert curves.h5m curves.vtk
</pre></div>
</div>
<p>Note in the above example that one must first extract the curve information to a
new .h5m file, and then convert that file to a .vtk file. When plotting, the
curves that define the boundary of each volume should be visible. An example
of this is shown below; curves are shown on the left and facets on the right.</p>
<a class="reference internal image-reference" href="../_images/fng_curves.png"><img alt="Image showing the FNG curve information" src="../_images/fng_curves.png" style="width: 300px; height: 300px;" /></a>
<a class="reference internal image-reference" href="../_images/fng_facets.png"><img alt="Image showing the FNG facet information" src="../_images/fng_facets.png" style="width: 300px; height: 300px;" /></a>
<p>The .vtk file containing the curves is useful if you wish to examine the final
model in a convenient and graphically responsive way; however, one cannot
perform slice operations on the curve file. When plotting alongside mesh files,
the .stl file should be used as it can be sliced conviently. If the .stl file is
still prohibitively large, it is sometimes useful to generate a facet file with
higher tolerances purely for visualization purposes.</p>
</div>
<div class="section" id="visualizing-dagmc-mesh-tally-output">
<h2>Visualizing DAGMC mesh tally output<a class="headerlink" href="#visualizing-dagmc-mesh-tally-output" title="Permalink to this headline">¶</a></h2>
<p>There are number of ways that conventional MCNP cartesian meshtal files can be
viewed in <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit">VisIt</a> or <a class="reference external" href="http://www.paraview.org">Paraview</a>. Users can download and install the
<a class="reference external" href="http://pyne.io">PyNE toolkit</a> and use the <code class="docutils literal notranslate"><span class="pre">meshtal_to_mesh</span></code> tool, or <code class="docutils literal notranslate"><span class="pre">mbconvert</span></code>
can be used to convert meshtal files to h5m. Advanced DAGMC mesh tallies
(tetrahedral mesh tallies) are natively produced in .h5m file format. In either
case, the resultant cartesian or tetrahedral mesh tally must be converted from
.h5m to .vtk format. <code class="docutils literal notranslate"><span class="pre">mbconvert</span></code> can be used to convert the output mesh file
to a .vtk file for viewing or post-processing with VisIt or other plotting
tools.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mbconvert mesh_out.h5m mesh_out.vtk
</pre></div>
</div>
<p>Having produced .stl files for slicing and .vtk files for mesh tallies, we can
load these files into <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit">VisIt</a> or <a class="reference external" href="http://www.paraview.org">Paraview</a>, or any other tool that can read .stl
and .vtk files.</p>
</div>
</div>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2012-2017, The UW CNERG Team.
      </p>
      <p>
      Last updated on Feb 11, 2019.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.1.
      </p>
    </div>
  </body>
</html>